(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{196:function(e,t,n){},197:function(e,t,n){},217:function(e,t,n){},357:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(87),r=n.n(s),i=(n(196),n(65)),o=(n.p,n(197),n(167)),l=n.n(o);console.log("process.env.REACT_APP_API_BASE","http://3.236.19.157:3000/");var j=l.a.create({baseURL:"http://3.236.19.157:3000/"});j.interceptors.response.use((function(e){return console.log("response succcess"),e}),(function(e){return console.log("API response error",e.message),Promise.resolve({error:e})})),j.defaults.headers.common=Object(i.a)(Object(i.a)({},j.defaults.headers.common),{},{"Content-Type":"application/json"}),j.defaults.preflightContinue=!0;var d=j,h=n(97),b=n(21),u=n(2),O=function(e){return Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{children:[" ",Object(u.jsx)("a",{href:"#/live-events",children:" Live Events"})]}),Object(u.jsx)("span",{children:" || "}),Object(u.jsxs)("span",{children:[" ",Object(u.jsx)("a",{href:"#/org-contribution",children:" Org Contribution "})]})]}),Object(u.jsx)("main",{children:e.children})]})},p=n(41),x=n.n(p),f=n(89),v=n(20),g=n(368),m=(n(217),function(e){var t=Object(c.useState)("2021-08-27 09:00:00"),n=Object(v.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)("2021-08-27 11:00:00"),i=Object(v.a)(r,2),o=i[0],l=i[1],j=Object(c.useState)("11224,10042,9906,1381,11203,10681,8055,8732,11193,7305,11210,10985,10988,11190,6658,5644,10913,6495,4229"),h=Object(v.a)(j,2),b=h[0],O=h[1],p=Object(c.useState)("mapandchathour2021"),m=Object(v.a)(p,2),k=m[0],y=m[1],w=Object(c.useState)(null),C=Object(v.a)(w,2),T=C[0],S=C[1],F=Object(c.useState)(!1),D=Object(v.a)(F,2),P=D[0],I=D[1],_=function(){var e=Object(f.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("calling /live_events"),t=encodeURI("/live_events/".concat(a,"/").concat(o,"/").concat(b,"/").concat(k||" ")),e.next=5,d.get(t);case 5:if(n=e.sent,console.log("res",n),!n.error){e.next=11;break}e.next=17;break;case 11:if(n){e.next=14;break}e.next=17;break;case 14:return S(n.data),console.log("res",n),e.abrupt("return",n.data);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("Custom Error",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),A=Object(g.a)(_),E=A.mutate,N=A.isLoading;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"live-event-style",children:[Object(u.jsx)("label",{children:"Event between"})," ",Object(u.jsx)("input",{type:"text",placeholder:"Start Date",disabled:N,value:a,onChange:function(e){s(e.target.value)}}),Object(u.jsx)("label",{children:"and"}),Object(u.jsx)("input",{type:"text",placeholder:"End Date",disabled:N,value:o,onChange:function(e){l(e.target.value)}}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("label",{children:[" Project Ids "," ",Object(u.jsxs)("div",{className:"tooltip",children:[" ",Object(u.jsx)("a",{href:"#",onClick:function(e){e.preventDefault()},className:"help",children:"?"}),Object(u.jsxs)("span",{className:"tooltiptext",children:["Project IDs as comma separated values. They will be used to filter the changesets based HOT TM standard hashtags (hotosm-project-PROJECT_ID)",Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),"Filtering is done on the hashtags or the comment fields of a changeset"]})]})]}),Object(u.jsx)("textarea",{value:b,disabled:N,onChange:function(e){O(e.target.value)},placeholder:"Project IDs are entered here, ex: 11224,15985",rows:"8"})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("label",{children:["Hashtags"," ",Object(u.jsxs)("div",{className:"tooltip",children:[" ",Object(u.jsx)("a",{href:"#",onClick:function(e){e.preventDefault()},className:"help",children:"?"}),Object(u.jsx)("span",{className:"tooltiptext",children:"Add here any hashtag that is associated with the event, hashtags will be used to filter the changesets based on the hashtags or comment field"})]})]}),Object(u.jsx)("textarea",{value:k,disabled:N,onChange:function(e){y(e.target.value)},placeholder:"#mapandchathour2021",rows:"8"})]})]}),Object(u.jsx)("button",{onClick:function(){E(),console.log("call API")},disabled:""===a||""===o||""===b||N,children:"Refresh"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Refreshing the insights might take ~ 15 seconds based on the event duration, number of projects and hashtags"}),N&&Object(u.jsxs)("div",{className:"lds-ring",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})]}),T&&!N&&Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:[" Total Contributors = ",T.contributersCount]}),Object(u.jsxs)("p",{children:["Total number of contributors who have mapped at least a feature during the specified time span and used one of the projects tags (hostosm-project-PROJECT_ID) or an event hashtag in their changeset",Object(u.jsx)("br",{}),"HOT TM users who have checked/opened TM task and didn't map are not counted"]})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("h2",{children:["Total Buildings Validated = ",T.buildingsValidated,"  out of ",T.mappedFeatures.find((function(e){return"building"===e.key})).count," total mapped"]}),Object(u.jsxs)("p",{children:[" ","The total number of validated buildings refers to the total buildings which are mapped during the specified time span and",Object(u.jsx)("strong",{children:" exists in a HOT TM validated task"}),Object(u.jsx)("br",{})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Event Mapped Features"}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Feature"}),Object(u.jsx)("th",{children:"Count"})]})}),Object(u.jsxs)("tbody",{children:[!P&&T.mappedFeatures.slice(0,10).map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.key}),Object(u.jsx)("td",{children:e.count})]},e.key)})),P&&T.mappedFeatures.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.key}),Object(u.jsx)("td",{children:e.count})]},e.key)}))]})]}),Object(u.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),I(!P)},children:P?"Show less":"Show all"})]})]})]})})}),k=n(367),y=n(361),w=n(182),C=n(183),T=n(79),S=n(76),F=n(187),D=function(e){var t=function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.get("/key-stats/asia/Philippines/building");case 3:if(!(t=e.sent).error){e.next=7;break}return console.log("Error",t.error),e.abrupt("return");case 7:if(t){e.next=10;break}return console.log("No response"),e.abrupt("return");case 10:return console.log("res.data",t.data),e.abrupt("return",t.data);case 14:e.prev=14,e.t0=e.catch(0),console.log("Unexpected Error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n=Object(k.a)("fetchStats",t),c=n.data;n.refetch,new Date(2008,1,1),new Date(2021,7,31);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("select",{children:[Object(u.jsx)("option",{value:"africa",children:"Africa"}),Object(u.jsx)("option",{value:"asia",children:"Asia"}),Object(u.jsx)("option",{value:"africa",children:"Central America"}),Object(u.jsx)("option",{value:"africa",children:"South America"})]}),Object(u.jsx)("input",{type:"text",placeholder:"Country"}),Object(u.jsx)("input",{type:"text",placeholder:"Key"}),c&&Object(u.jsxs)(y.a,{data:c,width:1e3,height:300,margin:{left:20,right:10},children:[Object(u.jsx)(w.a,{dataKey:"by_month_osm",reversed:!0,tickFormatter:function(e){return new Date(e).getMonth()+"-"+new Date(e).getFullYear()}}),Object(u.jsx)(C.a,{domain:[0,12e6]}),Object(u.jsx)(T.a,{}),Object(u.jsx)(S.a,{}),Object(u.jsx)(F.a,{type:"monotone",dataKey:"accmulative_total_hot",stroke:"#8884d8"}),Object(u.jsx)(F.a,{type:"monotone",dataKey:"accmulative_total_osm",stroke:"#82ca9d"})]})]})})};var P=Object(b.e)((function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("header",{children:[Object(u.jsx)("h1",{children:"OSM Insights"}),Object(u.jsx)("p",{children:"It is all about OSM"})]}),Object(u.jsx)(h.b,{children:Object(u.jsx)(O,{children:Object(u.jsxs)(c.Suspense,{fallback:"Loading",children:[Object(u.jsx)(b.a,{path:"/live-events",render:function(e){return Object(u.jsx)(m,Object(i.a)({},e))}}),Object(u.jsx)(b.a,{path:"/org-contribution",render:function(e){return Object(u.jsx)(D,Object(i.a)({},e))}})]})})})]})})),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,369)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},_=n(366),A=n(91),E=new _.a;r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(A.a,{client:E,children:Object(u.jsx)(h.a,{children:Object(u.jsx)(P,{})})})}),document.getElementById("root")),I()}},[[357,1,2]]]);
//# sourceMappingURL=main.e1f57205.chunk.js.map